function e(){d.style.marginTop=parseInt(m)-1+"px",m=d.style.marginTop,d.style.opacity=parseFloat(d.style.opacity)-.02+"",parseInt(m)>-20?setTimeout(function(){e()},10):(d.style.display="none",o("main")[0].style.cursor="move")}function t(e){console.log(this),this.parentElement.parentElement.style.opacity="0.4"}function n(e,t){var n=parseInt(getComputedStyle(e).width);console.log(e);var l=parseInt(getComputedStyle(t).width),r=parseInt(getComputedStyle(t).height);t.style.cssText="display:block;left:calc(50% - "+(l/2-10)+"px); top:-"+r+"px;transform-origin:"+(l/2-10)+"px "+(n/2+r)+"px;"}function l(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1}function r(e){var t=e.parentElement.getElementsByTagName("textarea");if(t.length>0)return void e.parentElement.removeChild(t[0]);var n=document.createElement("textarea");n.innerHTML="Input some biography/notes here",i("infoAdd")[0].parentElement.appendChild(n)}function o(e){return document.getElementsByTagName(e)}function a(e){return document.getElementById(e)}function i(e){return document.getElementsByClassName(e)}var s=a("sliderScale"),c=!1,d=a("greetingText"),m=getComputedStyle(d)["margin-top"],p=i("singlePerson"),u=null,g=!1,y=i("scaleNumber")[0],f=-168,h=!1;d.style.opacity="1",s.value="100",s.onchange=function(e){i("scaleNumber")[0].innerHTML=s.value+"%",o("main")[0].style.transform="scale("+parseInt(s.value)/100+")"},document.querySelectorAll("ul.formats li")[0].onclick=function(){console.log("CLICK");var e=document.createElement("form");e.method="post",e.action="/Home/ScreenShot",e.innerHTML="<input type='hidden' value='"+document.documentElement.innerHTML+"' name='htmlToParse'>",document.body.appendChild(e),e.submit(),console.log(e)},y.onclick=function(t){s.style.display="block",c||(c=!0,e())},document.body.ondblclick=function(){h=!h},document.onmousemove=function(e){var t=i("boundingRectangle")[i("boundingRectangle").length-1].getBoundingClientRect();if(0!=h&&void 0!==t){console.log(e.pageX);var n=[t.left+50,t.top+50],l=Math.atan2(e.pageX-n[0],-(e.pageY-n[1]))*(180/Math.PI);i("leftTree")[i("leftTree").length-2].style.transform="rotate("+l+"deg)"}};var v=document.querySelectorAll(".movePersonCircle");[].forEach.call(v,function(e){e.addEventListener("dragstart",t,!1),e.addEventListener("dragover",l,!1)}),document.onclick=function(t){var l=t.target,a=l.className;if(t.target!=s&&t.target!=y&&(s.style.display="none"),"singlePerson"===a||"emptyPersonImage"===a){c||e(),"emptyPersonImage"===a&&(l=l.parentElement);for(var d=i("addTree"),m=0;m<d.length;m++)d[m].className.indexOf("treeShown")===-1&&(d[m].style.display="inline-block");var p=document.createEvent("MouseEvents");p.initEvent("click",!1,!0);var h=l.getElementsByTagName("input")[0];return h.dispatchEvent(p),void(h.onchange=function(e){if(h.files&&h.files[0]){var t=new FileReader;t.onload=function(e){0==g&&(i("helpText")[0].style.display="block");var t=l.getElementsByTagName("img")[0];t.src=e.target.result,t.onload=function(){t.style.width="256px"},u=t},t.readAsDataURL(h.files[0])}})}if("infoAdd"===a)return void r(l);if(a.indexOf("addTree")>-1){var v=l.parentElement.getElementsByClassName("leftTree")[0],E=!0;a.indexOf("right")>-1&&(v=l.parentElement.getElementsByClassName("rightTree")[0],E=!1),v.style.display="block",l.className+=" treeShown";var C=v.getBoundingClientRect(),T=document.createElement("div");T.className="singlePersonWrapper",T.style.position="absolute",E?T.style.left=C.left-80+"px":T.style.left=C.right-180+"px",T.style.top=f+"px",f*=2;for(var b=i("personHolder")[i("personHolder").length-1],x=b.cloneNode(!0),m=0;m<x.childElementCount;m++){var k=x.children[m],w=k.className;if(k.className=w.replace("treeShown",""),"boundingRectangle"==w)for(var I=k.children[0],N=0;N<I.childElementCount;N++)I.children[N].removeAttribute("style");(w.indexOf("leftTree")>-1||w.indexOf("rightTree")>-1)&&(k.removeAttribute("style"),n(k,k)),"singlePerson"==w&&(k.children[1].src="images/noperson.svg",k.children[1].removeAttribute("style"))}for(var m=0;m<b.childElementCount;m++)if("boundingRectangle"==b.children[m].className)for(var I=b.children[m].children[0],S=0;S<I.childElementCount;S++)I.children[S].hasAttribute("style")&&n(I,I.children[S]);T.appendChild(x),o("section")[0].appendChild(T),console.log(document.getElementsByClassName("rightTree")[1].y)}},document.onkeydown=function(e){if(null!=u)switch(e.key){case"ArrowUp":u.style.marginTop=parseInt(getComputedStyle(u)["margin-top"])-1+"px";break;case"ArrowDown":u.style.marginTop=parseInt(getComputedStyle(u)["margin-top"])+1+"px";break;case"ArrowLeft":u.style.marginLeft=parseInt(getComputedStyle(u)["margin-left"])-1+"px";break;case"ArrowRight":u.style.marginLeft=parseInt(getComputedStyle(u)["margin-left"])+1+"px";break;case"+":u.style.width=parseInt(getComputedStyle(u).width)+1+"px";break;case"-":u.style.width=parseInt(getComputedStyle(u).width)-1+"px"}},a("closeButton").onclick=function(){i("helpText")[0].style.display="none",g=!0};